<!--
 Copyright 2024 Google LLC

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->

<header class="game-header">
  <a routerLink="/">
    <svg
      width="280"
      height="23"
      viewBox="0 0 280 23"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M10.5317 1.2C16.1957 1.2 18.0917 2.928 18.0917 7.2C18.0917 10.272 17.1077 12.048 14.4197 12.768L17.5157 18H12.5477L9.69169 13.2H4.69969V18H0.139688V1.2H10.5317ZM4.69969 8.64H11.8277C13.0997 8.64 13.5317 8.04 13.5317 7.2C13.5317 6.36 13.0997 5.76 11.8277 5.76H4.69969V8.64ZM18.9722 11.28C18.9722 6.48 21.5402 4.176 27.2282 4.176C32.9402 4.176 35.5082 6.48 35.5082 11.28C35.5082 16.08 32.9402 18.384 27.2282 18.384C21.5402 18.384 18.9722 16.08 18.9722 11.28ZM23.2442 11.28C23.2442 12.84 24.2762 13.824 27.2282 13.824C30.2282 13.824 31.2362 12.84 31.2362 11.28C31.2362 9.72 30.2282 8.736 27.2282 8.736C24.2762 8.736 23.2442 9.72 23.2442 11.28ZM36.4566 11.28C36.4566 6.48 39.0246 4.176 44.4486 4.176C49.8486 4.176 52.4166 6.48 52.4166 10.32H48.1446C48.1446 9.48 47.1366 8.736 44.4486 8.736C41.7366 8.736 40.7286 9.72 40.7286 11.28C40.7286 12.84 41.7366 13.824 44.4486 13.824C47.1366 13.824 48.1446 13.08 48.1446 12.24H52.4166C52.4166 16.08 49.8486 18.384 44.4486 18.384C39.0246 18.384 36.4566 16.08 36.4566 11.28ZM58.1304 0.24V8.88H59.8584L63.3624 4.56H68.4504L63.2904 10.92L61.2984 11.064L63.2904 10.92L68.7384 18H63.3624L59.9544 13.44H58.1304V18H53.8584V0.24H58.1304ZM85.4614 1.2C91.1254 1.2 93.0214 2.928 93.0214 7.2C93.0214 11.472 91.1254 13.2 85.4614 13.2H79.6294V18H75.0694V1.2H85.4614ZM79.6294 8.64H86.7574C88.0294 8.64 88.4614 8.04 88.4614 7.2C88.4614 6.36 88.0294 5.76 86.7574 5.76H79.6294V8.64ZM107.97 4.56H110.25V18H107.97L106.002 11.352C105.978 16.104 104.226 18.384 99.9784 18.384C95.7064 18.384 93.7144 16.08 93.7144 11.28C93.7144 6.48 95.7064 4.176 99.9784 4.176C104.226 4.176 105.978 6.456 106.002 11.208L107.97 4.56ZM97.9864 11.28C97.9864 12.84 98.9944 13.824 101.97 13.824C104.97 13.824 105.978 12.84 105.978 11.28C105.978 9.72 104.97 8.736 101.97 8.736C98.9944 8.736 97.9864 9.72 97.9864 11.28ZM116.443 22.08H112.171V4.56H114.451L116.419 11.208C116.443 6.456 118.171 4.176 122.443 4.176C126.715 4.176 128.707 6.48 128.707 11.28C128.707 16.08 126.715 18.384 122.443 18.384C118.435 18.384 116.659 16.392 116.443 12.216V22.08ZM116.443 11.28C116.443 12.84 117.451 13.824 120.427 13.824C123.427 13.824 124.435 12.84 124.435 11.28C124.435 9.72 123.427 8.736 120.427 8.736C117.451 8.736 116.443 9.72 116.443 11.28ZM129.902 11.28C129.902 6.48 132.47 4.176 138.158 4.176C143.87 4.176 146.438 6.48 146.438 11.04V11.76H134.198C134.366 13.344 135.446 14.544 138.158 14.544C141.158 14.544 142.166 13.32 142.166 12.48H146.438C146.438 16.08 143.87 18.384 138.158 18.384C132.47 18.384 129.902 16.08 129.902 11.28ZM134.174 11.28L134.198 11.712L142.022 9.456C141.878 8.76 141.158 7.776 138.158 7.776C135.182 7.776 134.174 9.24 134.174 11.28ZM152.138 18H147.866V4.56H150.146L152.066 12.576C151.274 7.464 152.21 4.32 156.122 4.32V10.704C153.146 10.704 152.138 11.304 152.138 12.864V18ZM180.573 12.96C180.573 16.032 178.029 18.384 171.597 18.384C165.453 18.384 162.621 15.672 162.621 12H167.181C167.181 13.176 168.117 14.064 171.597 14.064C174.789 14.064 175.725 13.488 175.725 12.72C175.725 10.44 162.765 13.68 162.765 6.24C162.765 3.408 165.309 0.816 171.597 0.816C177.621 0.816 180.429 3.528 180.429 7.2H175.869C175.869 6.024 174.933 5.136 171.597 5.136C168.549 5.136 167.613 5.712 167.613 6.6C167.613 9.264 180.573 6 180.573 12.96ZM181.535 11.28C181.535 6.48 184.103 4.176 189.527 4.176C194.927 4.176 197.495 6.48 197.495 10.32H193.223C193.223 9.48 192.215 8.736 189.527 8.736C186.815 8.736 185.807 9.72 185.807 11.28C185.807 12.84 186.815 13.824 189.527 13.824C192.215 13.824 193.223 13.08 193.223 12.24H197.495C197.495 16.08 194.927 18.384 189.527 18.384C184.103 18.384 181.535 16.08 181.535 11.28ZM203.209 4.56V18H198.937V4.56H203.209ZM198.937 3.6V0.24H203.209V3.6H198.937ZM219.836 14.64C219.836 16.992 217.604 18.384 212.3 18.384C207.284 18.384 204.74 16.872 204.74 13.2H209.012C209.012 13.896 209.948 14.544 212.3 14.544C214.628 14.544 215.564 13.968 215.564 12.96C215.564 9.48 204.884 13.68 204.884 7.92C204.884 5.808 207.14 4.176 212.3 4.176C217.172 4.176 219.692 5.688 219.692 9.36H215.42C215.42 8.664 214.484 8.016 212.3 8.016C210.092 8.016 209.156 8.592 209.156 9.48C209.156 12.864 219.836 9.6 219.836 14.64ZM236.078 14.64C236.078 16.992 233.846 18.384 228.542 18.384C223.526 18.384 220.982 16.872 220.982 13.2H225.254C225.254 13.896 226.19 14.544 228.542 14.544C230.87 14.544 231.806 13.968 231.806 12.96C231.806 9.48 221.126 13.68 221.126 7.92C221.126 5.808 223.382 4.176 228.542 4.176C233.414 4.176 235.934 5.688 235.934 9.36H231.662C231.662 8.664 230.726 8.016 228.542 8.016C226.334 8.016 225.398 8.592 225.398 9.48C225.398 12.864 236.078 9.6 236.078 14.64ZM237.128 11.28C237.128 6.48 239.696 4.176 245.384 4.176C251.096 4.176 253.664 6.48 253.664 11.28C253.664 16.08 251.096 18.384 245.384 18.384C239.696 18.384 237.128 16.08 237.128 11.28ZM241.4 11.28C241.4 12.84 242.432 13.824 245.384 13.824C248.384 13.824 249.392 12.84 249.392 11.28C249.392 9.72 248.384 8.736 245.384 8.736C242.432 8.736 241.4 9.72 241.4 11.28ZM259.365 18H255.093V4.56H257.373L259.293 12.576C258.501 7.464 259.437 4.32 263.349 4.32V10.704C260.373 10.704 259.365 11.304 259.365 12.864V18ZM279.25 14.64C279.25 16.992 277.018 18.384 271.714 18.384C266.698 18.384 264.154 16.872 264.154 13.2H268.426C268.426 13.896 269.362 14.544 271.714 14.544C274.042 14.544 274.978 13.968 274.978 12.96C274.978 9.48 264.298 13.68 264.298 7.92C264.298 5.808 266.554 4.176 271.714 4.176C276.586 4.176 279.106 5.688 279.106 9.36H274.834C274.834 8.664 273.898 8.016 271.714 8.016C269.506 8.016 268.57 8.592 268.57 9.48C268.57 12.864 279.25 9.6 279.25 14.64Z"
        fill="inherit"
      />
    </svg>
  </a>
  @if (playerGlobalScore() > 0 || computerGlobalScore() > 0) {
    <div class="overall-score">
      <p>Overall Score</p>
      <span class="score">{{ playerGlobalScore() }} - {{ computerGlobalScore() }}</span>
    </div>
  }
</header>

@if (gameStatus() | gameStatusToSvgPaths; as svgPaths) {
  <div class="game-status">
    @for (svgPath of svgPaths; track $index) {
      <img [src]="'assets/game-statuses/' + svgPath" alt="Game Status" />
    }
  </div>
} @else {
  <p class="game-status">{{ gameStatus() }}</p>
}

<div class="game-field">
  <div class="player human">
    <header>
      <svg
        class="player-name"
        width="87"
        height="23"
        viewBox="0 0 87 23"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M5.52 18H0.96V1.2H5.52V18ZM11.352 1.2L12.648 5.76H2.904V1.2H11.352ZM12.648 8.64L11.352 13.2H2.904V8.64H12.648ZM11.352 1.2C13.24 1.2 14.728 1.408 15.816 1.824C16.92 2.224 17.712 2.856 18.192 3.72C18.672 4.584 18.912 5.744 18.912 7.2H14.352C14.352 6.24 13.784 5.76 12.648 5.76L11.352 1.2ZM12.648 8.64C13.784 8.64 14.352 8.16 14.352 7.2H18.912C18.912 8.656 18.672 9.816 18.192 10.68C17.712 11.544 16.92 12.184 15.816 12.6C14.728 13 13.24 13.2 11.352 13.2L12.648 8.64ZM24.8258 18H20.5538V0.24H24.8258V18ZM42.7973 4.56V18H40.5173L38.5253 11.28L40.5173 4.56H42.7973ZM26.2613 11.28C26.2613 8.88 26.7733 7.096 27.7973 5.928C28.8213 4.76 30.3973 4.176 32.5253 4.176C34.6373 4.176 36.1653 4.752 37.1093 5.904C38.0693 7.056 38.5493 8.848 38.5493 11.28H38.5253C38.5253 10.448 38.2133 9.816 37.5893 9.384C36.9653 8.952 35.9413 8.736 34.5173 8.736C33.0933 8.736 32.0693 8.952 31.4453 9.384C30.8373 9.816 30.5333 10.448 30.5333 11.28H26.2613ZM30.5333 11.28C30.5333 12.096 30.8373 12.728 31.4453 13.176C32.0693 13.608 33.0933 13.824 34.5173 13.824C35.9413 13.824 36.9653 13.608 37.5893 13.176C38.2133 12.728 38.5253 12.096 38.5253 11.28H38.5493C38.5493 13.712 38.0693 15.504 37.1093 16.656C36.1653 17.808 34.6373 18.384 32.5253 18.384C30.3973 18.384 28.8213 17.8 27.7973 16.632C26.7733 15.464 26.2613 13.68 26.2613 11.28H30.5333ZM54.0538 16.56C53.3498 17.856 52.6858 18.888 52.0618 19.656C51.4378 20.44 50.6458 21.04 49.6858 21.456C48.7418 21.888 47.5338 22.096 46.0618 22.08V18.192C47.0378 18.192 47.8458 18.056 48.4858 17.784C49.1418 17.512 49.5738 17.104 49.7818 16.56L43.5898 4.56H48.5818L51.7258 11.04H52.2778L55.4218 4.56H60.2698L54.0538 16.56ZM60.0581 11.28C60.0581 8.864 60.7301 7.08 62.0741 5.928C63.4181 4.76 65.4981 4.176 68.3141 4.176C71.1461 4.176 73.2341 4.744 74.5781 5.88C75.9221 7.016 76.5941 8.736 76.5941 11.04V11.76H64.1621L72.1781 9.456C72.0821 9.008 71.7461 8.616 71.1701 8.28C70.5941 7.944 69.6421 7.776 68.3141 7.776C66.8901 7.776 65.8661 8.088 65.2421 8.712C64.6341 9.32 64.3301 10.176 64.3301 11.28H60.0581ZM64.3301 11.28C64.3301 12.256 64.6421 13.048 65.2661 13.656C65.9061 14.248 66.9221 14.544 68.3141 14.544C69.2581 14.544 70.0261 14.44 70.6181 14.232C71.2101 14.008 71.6421 13.744 71.9141 13.44C72.1861 13.12 72.3221 12.8 72.3221 12.48H76.5941C76.5941 14.336 75.9061 15.784 74.5301 16.824C73.1701 17.864 71.0981 18.384 68.3141 18.384C65.4981 18.384 63.4181 17.808 62.0741 16.656C60.7301 15.488 60.0581 13.696 60.0581 11.28H64.3301ZM78.0225 18V4.56H80.3025L82.2945 12.864V18H78.0225ZM86.2785 10.704C85.2705 10.704 84.4785 10.776 83.9025 10.92C83.3425 11.064 82.9345 11.296 82.6785 11.616C82.4225 11.92 82.2945 12.336 82.2945 12.864H82.2705C81.8065 10.08 81.8785 7.96 82.4865 6.504C83.0945 5.048 84.3585 4.32 86.2785 4.32V10.704Z"
          fill="current"
        />
      </svg>
      <p class="player-result">{{ playerScore() }}</p>
    </header>
    <video #video width="640" height="360" autoplay [srcObject]="stream"></video>
    <canvas #canvas width="640" height="360"></canvas>
    @if (isLoadingTensorflowFailed()) {
      <div class="loading-overlay error">
        <p>Unexpected failure of loading tensorflow handpose model!</p>
      </div>
    } @else if (isLoadingCamera()) {
      <div class="loading-overlay">
        <app-loading></app-loading>
        <p>Loading tensorflow handpose model...</p>
      </div>
    }
  </div>
  <div class="game-field-actions">
    @switch (gameStatus()) {
      @case (GameStatuses.LetsPlay) {
        <button class="game-start" (click)="startCountdown()" [disabled]="isLoadingCamera()">
          <svg
            width="160"
            height="42"
            viewBox="0 0 160 42"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M42.3986 29.24C42.3986 36.408 36.4626 41.896 21.4546 41.896C7.11863 41.896 0.510625 35.568 0.510625 27H11.1506C11.1506 29.744 13.3346 31.816 21.4546 31.816C28.9026 31.816 31.0866 30.472 31.0866 28.68C31.0866 23.36 0.846625 30.92 0.846625 13.56C0.846625 6.952 6.78262 0.903999 21.4546 0.903999C35.5106 0.903999 42.0626 7.232 42.0626 15.8H31.4226C31.4226 13.056 29.2386 10.984 21.4546 10.984C14.3426 10.984 12.1586 12.328 12.1586 14.4C12.1586 20.616 42.3986 13 42.3986 29.24ZM60.3794 30.36H68.3314V41H60.3794C52.4274 41 47.7234 38.144 47.7234 31.48C47.7234 25.376 52.3154 21.792 57.6354 20.28H42.4034L57.6914 4.6V9.64H68.3314V20.28H57.6914V28.12C57.6914 29.52 58.6994 30.36 60.3794 30.36ZM103.829 9.64H109.149V41H103.829L99.2373 25.488C99.1813 36.576 95.0933 41.896 85.1813 41.896C75.2133 41.896 70.5653 36.52 70.5653 25.32C70.5653 14.12 75.2133 8.744 85.1813 8.744C95.0933 8.744 99.1813 14.064 99.2373 25.152L103.829 9.64ZM80.5333 25.32C80.5333 28.96 82.8853 31.256 89.8293 31.256C96.8293 31.256 99.1813 28.96 99.1813 25.32C99.1813 21.68 96.8293 19.384 89.8293 19.384C82.8853 19.384 80.5333 21.68 80.5333 25.32ZM123.599 41H113.631V9.64H118.951L123.431 28.344C121.583 16.416 123.767 9.08 132.895 9.08V23.976C125.951 23.976 123.599 25.376 123.599 29.016V41ZM151.544 30.36H159.496V41H151.544C143.592 41 138.888 38.144 138.888 31.48C138.888 25.376 143.48 21.792 148.8 20.28H133.567L148.856 4.6V9.64H159.496V20.28H148.856V28.12C148.856 29.52 149.864 30.36 151.544 30.36Z"
              fill="white"
            />
          </svg>
        </button>
      }
      @case (GameStatuses.GetReady) {
        <div class="countdown">
          @switch (countdown()) {
            @case (Countdown.PAPER) {
              <svg
                width="515"
                height="137"
                viewBox="0 0 515 137"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M130.721 134H93.4612L69.8812 94.4H107.321L130.721 134ZM34.6012 134H0.401172V7.99999H34.6012V134ZM78.3412 7.99999L88.0612 42.2H14.9812V7.99999H78.3412ZM88.0612 63.8L78.3412 98H14.9812V63.8H88.0612ZM78.3412 7.99999C92.5012 7.99999 103.661 9.55999 111.821 12.68C120.101 15.68 126.041 20.42 129.641 26.9C133.241 33.38 135.041 42.08 135.041 53H100.841C100.841 45.8 96.5812 42.2 88.0612 42.2L78.3412 7.99999ZM88.0612 63.8C96.5812 63.8 100.841 60.2 100.841 53H135.041C135.041 63.92 133.241 72.62 129.641 79.1C126.041 85.58 120.101 90.38 111.821 93.5C103.661 96.5 92.5012 98 78.3412 98L88.0612 63.8ZM141.645 83.6C141.645 65.48 146.685 52.1 156.765 43.46C166.845 34.7 182.445 30.32 203.565 30.32C224.805 30.32 240.465 34.7 250.545 43.46C260.625 52.1 265.665 65.48 265.665 83.6H233.625C233.625 77.36 231.285 72.62 226.605 69.38C221.925 66.14 214.245 64.52 203.565 64.52C193.005 64.52 185.385 66.2 180.705 69.56C176.025 72.8 173.685 77.48 173.685 83.6H141.645ZM173.685 83.6C173.685 89.72 176.025 94.46 180.705 97.82C185.385 101.06 193.005 102.68 203.565 102.68C214.245 102.68 221.925 101.06 226.605 97.82C231.285 94.46 233.625 89.72 233.625 83.6H265.665C265.665 101.72 260.625 115.16 250.545 123.92C240.465 132.56 224.805 136.88 203.565 136.88C182.445 136.88 166.845 132.56 156.765 123.92C146.685 115.16 141.645 101.72 141.645 83.6H173.685ZM272.778 83.6C272.778 65.6 277.698 52.22 287.538 43.46C297.378 34.7 312.378 30.32 332.538 30.32C352.578 30.32 367.578 34.34 377.538 42.38C387.498 50.42 392.478 61.76 392.478 76.4H360.438C360.438 72.92 358.158 70.1 353.598 67.94C349.158 65.66 342.138 64.52 332.538 64.52C322.818 64.52 315.738 66.2 311.298 69.56C306.978 72.8 304.818 77.48 304.818 83.6H272.778ZM304.818 83.6C304.818 89.72 306.978 94.46 311.298 97.82C315.738 101.06 322.818 102.68 332.538 102.68C342.138 102.68 349.158 101.6 353.598 99.44C358.158 97.16 360.438 94.28 360.438 90.8H392.478C392.478 105.44 387.498 116.78 377.538 124.82C367.578 132.86 352.578 136.88 332.538 136.88C312.378 136.88 297.378 132.5 287.538 123.74C277.698 114.98 272.778 101.6 272.778 83.6H304.818ZM435.332 134H403.292V0.799998H435.332V134ZM474.032 80.9L433.712 83.6L474.572 33.2H512.732L474.032 80.9ZM459.092 65.6V99.8H415.892V65.6H459.092ZM514.892 134H474.572L436.952 83.6L474.032 80.9L514.892 134Z"
                  fill="white"
                />
              </svg>
            }
            @case (Countdown.ROCK) {
              <svg
                width="609"
                height="157"
                viewBox="0 0 609 157"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M34.4703 126H0.270313V-8.58307e-06H34.4703V126ZM78.2103 -8.58307e-06L87.9303 34.2H14.8503V-8.58307e-06H78.2103ZM87.9303 55.8L78.2103 90H14.8503V55.8H87.9303ZM78.2103 -8.58307e-06C92.3703 -8.58307e-06 103.53 1.55999 111.69 4.68C119.97 7.67999 125.91 12.42 129.51 18.9C133.11 25.38 134.91 34.08 134.91 45H100.71C100.71 37.8 96.4503 34.2 87.9303 34.2L78.2103 -8.58307e-06ZM87.9303 55.8C96.4503 55.8 100.71 52.2 100.71 45H134.91C134.91 55.92 133.11 64.62 129.51 71.1C125.91 77.58 119.97 82.38 111.69 85.5C103.53 88.5 92.3703 90 78.2103 90L87.9303 55.8ZM264.128 25.2V126H247.028L232.088 75.6L247.028 25.2H264.128ZM140.108 75.6C140.108 57.6 143.948 44.22 151.628 35.46C159.308 26.7 171.128 22.32 187.088 22.32C202.928 22.32 214.388 26.64 221.468 35.28C228.668 43.92 232.268 57.36 232.268 75.6H232.088C232.088 69.36 229.748 64.62 225.068 61.38C220.388 58.14 212.708 56.52 202.028 56.52C191.348 56.52 183.668 58.14 178.988 61.38C174.428 64.62 172.148 69.36 172.148 75.6H140.108ZM172.148 75.6C172.148 81.72 174.428 86.46 178.988 89.82C183.668 93.06 191.348 94.68 202.028 94.68C212.708 94.68 220.388 93.06 225.068 89.82C229.748 86.46 232.088 81.72 232.088 75.6H232.268C232.268 93.84 228.668 107.28 221.468 115.92C214.388 124.56 202.928 128.88 187.088 128.88C171.128 128.88 159.308 124.5 151.628 115.74C143.948 106.98 140.108 93.6 140.108 75.6H172.148ZM278.532 156.6V25.2H295.632L310.572 75.6V156.6H278.532ZM402.552 75.6C402.552 93.6 398.652 106.98 390.852 115.74C383.172 124.5 371.352 128.88 355.392 128.88C339.552 128.88 328.092 124.56 321.012 115.92C313.932 107.28 310.392 93.84 310.392 75.6H310.572C310.572 81.72 312.852 86.46 317.412 89.82C322.092 93.06 329.772 94.68 340.452 94.68C351.132 94.68 358.812 93.06 363.492 89.82C368.172 86.46 370.512 81.72 370.512 75.6H402.552ZM370.512 75.6C370.512 69.36 368.172 64.62 363.492 61.38C358.812 58.14 351.132 56.52 340.452 56.52C329.772 56.52 322.092 58.14 317.412 61.38C312.852 64.62 310.572 69.36 310.572 75.6H310.392C310.392 57.36 313.932 43.92 321.012 35.28C328.212 26.64 339.732 22.32 355.572 22.32C371.412 22.32 383.172 26.7 390.852 35.46C398.652 44.22 402.552 57.6 402.552 75.6H370.512ZM411.514 75.6C411.514 57.48 416.554 44.1 426.634 35.46C436.714 26.7 452.314 22.32 473.434 22.32C494.674 22.32 510.334 26.58 520.414 35.1C530.494 43.62 535.534 56.52 535.534 73.8V79.2H442.294L502.414 61.92C501.694 58.56 499.174 55.62 494.854 53.1C490.534 50.58 483.394 49.32 473.434 49.32C462.754 49.32 455.074 51.66 450.394 56.34C445.834 60.9 443.554 67.32 443.554 75.6H411.514ZM443.554 75.6C443.554 82.92 445.894 88.86 450.574 93.42C455.374 97.86 462.994 100.08 473.434 100.08C480.514 100.08 486.274 99.3 490.714 97.74C495.154 96.06 498.394 94.08 500.434 91.8C502.474 89.4 503.494 87 503.494 84.6H535.534C535.534 98.52 530.374 109.38 520.054 117.18C509.854 124.98 494.314 128.88 473.434 128.88C452.314 128.88 436.714 124.56 426.634 115.92C416.554 107.16 411.514 93.72 411.514 75.6H443.554ZM546.247 126V25.2H563.347L578.287 87.48V126H546.247ZM608.167 71.28C600.607 71.28 594.667 71.82 590.347 72.9C586.147 73.98 583.087 75.72 581.167 78.12C579.247 80.4 578.287 83.52 578.287 87.48H578.107C574.627 66.6 575.167 50.7 579.727 39.78C584.287 28.86 593.767 23.4 608.167 23.4V71.28Z"
                  fill="white"
                />
              </svg>
            }
            @case (Countdown.SCISSORS) {
              <svg
                width="877"
                height="137"
                viewBox="0 0 877 137"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M135.59 96.2C135.59 104.24 133.25 111.32 128.57 117.44C124.01 123.44 116.69 128.18 106.61 131.66C96.5296 135.14 83.7496 136.88 68.2696 136.88C53.3896 136.88 40.9096 134.9 30.8296 130.94C20.7496 126.86 13.2496 121.22 8.32961 114.02C3.40961 106.7 0.94961 98.36 0.94961 89H35.1496C35.1496 93.8 37.6096 97.58 42.5296 100.34C47.4496 103.1 56.0296 104.48 68.2696 104.48C79.5496 104.48 87.5296 103.58 92.2096 101.78C96.8896 99.98 99.2296 97.52 99.2296 94.4L135.59 96.2ZM2.02961 45.8C2.02961 38.36 4.30961 31.58 8.86961 25.46C13.5496 19.34 20.8096 14.42 30.6496 10.7C40.6096 6.97999 53.1496 5.12 68.2696 5.12C82.9096 5.12 95.1496 7.16 104.99 11.24C114.95 15.2 122.33 20.84 127.13 28.16C132.05 35.36 134.51 43.64 134.51 53H100.31C100.31 48.2 97.8496 44.42 92.9296 41.66C88.1296 38.9 79.9096 37.52 68.2696 37.52C57.3496 37.52 49.6096 38.48 45.0496 40.4C40.6096 42.2 38.3896 44.9 38.3896 48.5C38.3896 51.86 40.9096 54.2 45.9496 55.52C50.9896 56.72 59.0896 57.8 70.2496 58.76C83.3296 59.72 94.2496 61.1 103.01 62.9C111.77 64.7 119.39 68.24 125.87 73.52C132.35 78.68 135.59 86.24 135.59 96.2L99.2296 94.4C99.2296 91.64 97.0696 89.84 92.7496 89C88.4296 88.04 81.1696 87.2 70.9696 86.48C57.2896 85.52 45.8296 84.14 36.5896 82.34C27.3496 80.54 19.2496 76.76 12.2896 71C5.44961 65.24 2.02961 56.84 2.02961 45.8ZM142.805 83.6C142.805 65.6 147.725 52.22 157.565 43.46C167.405 34.7 182.405 30.32 202.565 30.32C222.605 30.32 237.605 34.34 247.565 42.38C257.525 50.42 262.505 61.76 262.505 76.4H230.465C230.465 72.92 228.185 70.1 223.625 67.94C219.185 65.66 212.165 64.52 202.565 64.52C192.845 64.52 185.765 66.2 181.325 69.56C177.005 72.8 174.845 77.48 174.845 83.6H142.805ZM174.845 83.6C174.845 89.72 177.005 94.46 181.325 97.82C185.765 101.06 192.845 102.68 202.565 102.68C212.165 102.68 219.185 101.6 223.625 99.44C228.185 97.16 230.465 94.28 230.465 90.8H262.505C262.505 105.44 257.525 116.78 247.565 124.82C237.605 132.86 222.605 136.88 202.565 136.88C182.405 136.88 167.405 132.5 157.565 123.74C147.725 114.98 142.805 101.6 142.805 83.6H174.845ZM305.359 134H273.319V33.2H305.359V134ZM305.359 26H273.319V0.799998H305.359V26ZM430.065 108.8C430.065 117.92 425.445 124.88 416.205 129.68C407.085 134.48 392.865 136.88 373.545 136.88C354.465 136.88 340.245 133.82 330.885 127.7C321.525 121.46 316.845 111.56 316.845 98H348.885C348.885 100.88 350.925 103.28 355.005 105.2C359.085 107.12 365.265 108.08 373.545 108.08C382.065 108.08 388.245 107.06 392.085 105.02C396.045 102.98 398.025 100.04 398.025 96.2L430.065 108.8ZM317.925 58.4C317.925 53 319.905 48.2 323.865 44C327.825 39.68 333.945 36.32 342.225 33.92C350.625 31.52 361.065 30.32 373.545 30.32C392.145 30.32 406.005 33.44 415.125 39.68C424.365 45.8 428.985 55.64 428.985 69.2H396.945C396.945 67.4 396.105 65.72 394.425 64.16C392.745 62.6 390.105 61.4 386.505 60.56C383.025 59.6 378.705 59.12 373.545 59.12C365.625 59.12 359.685 60.08 355.725 62C351.885 63.92 349.965 66.62 349.965 70.1C349.965 73.7 351.465 76.46 354.465 78.38C357.465 80.3 361.185 81.62 365.625 82.34C370.185 83.06 376.365 83.72 384.165 84.32C394.005 85.16 401.985 86.18 408.105 87.38C414.225 88.58 419.385 90.86 423.585 94.22C427.905 97.58 430.065 102.44 430.065 108.8L398.025 96.2C398.025 92.6 396.585 89.96 393.705 88.28C390.945 86.6 387.345 85.52 382.905 85.04C378.585 84.44 372.825 84.08 365.625 83.96C355.425 83.72 347.145 83.12 340.785 82.16C334.545 81.2 329.145 78.92 324.585 75.32C320.145 71.6 317.925 65.96 317.925 58.4ZM552.058 108.8C552.058 117.92 547.438 124.88 538.198 129.68C529.078 134.48 514.858 136.88 495.538 136.88C476.458 136.88 462.238 133.82 452.878 127.7C443.518 121.46 438.838 111.56 438.838 98H470.878C470.878 100.88 472.918 103.28 476.998 105.2C481.078 107.12 487.258 108.08 495.538 108.08C504.058 108.08 510.238 107.06 514.078 105.02C518.038 102.98 520.018 100.04 520.018 96.2L552.058 108.8ZM439.918 58.4C439.918 53 441.898 48.2 445.858 44C449.818 39.68 455.938 36.32 464.218 33.92C472.618 31.52 483.058 30.32 495.538 30.32C514.138 30.32 527.998 33.44 537.118 39.68C546.358 45.8 550.978 55.64 550.978 69.2H518.938C518.938 67.4 518.098 65.72 516.418 64.16C514.738 62.6 512.098 61.4 508.498 60.56C505.018 59.6 500.698 59.12 495.538 59.12C487.618 59.12 481.678 60.08 477.718 62C473.878 63.92 471.958 66.62 471.958 70.1C471.958 73.7 473.458 76.46 476.458 78.38C479.458 80.3 483.178 81.62 487.618 82.34C492.178 83.06 498.358 83.72 506.158 84.32C515.998 85.16 523.978 86.18 530.098 87.38C536.218 88.58 541.378 90.86 545.578 94.22C549.898 97.58 552.058 102.44 552.058 108.8L520.018 96.2C520.018 92.6 518.578 89.96 515.698 88.28C512.938 86.6 509.338 85.52 504.898 85.04C500.578 84.44 494.818 84.08 487.618 83.96C477.418 83.72 469.138 83.12 462.778 82.16C456.538 81.2 451.138 78.92 446.578 75.32C442.138 71.6 439.918 65.96 439.918 58.4ZM560.11 83.6C560.11 65.48 565.15 52.1 575.23 43.46C585.31 34.7 600.91 30.32 622.03 30.32C643.27 30.32 658.93 34.7 669.01 43.46C679.09 52.1 684.13 65.48 684.13 83.6H652.09C652.09 77.36 649.75 72.62 645.07 69.38C640.39 66.14 632.71 64.52 622.03 64.52C611.47 64.52 603.85 66.2 599.17 69.56C594.49 72.8 592.15 77.48 592.15 83.6H560.11ZM592.15 83.6C592.15 89.72 594.49 94.46 599.17 97.82C603.85 101.06 611.47 102.68 622.03 102.68C632.71 102.68 640.39 101.06 645.07 97.82C649.75 94.46 652.09 89.72 652.09 83.6H684.13C684.13 101.72 679.09 115.16 669.01 123.92C658.93 132.56 643.27 136.88 622.03 136.88C600.91 136.88 585.31 132.56 575.23 123.92C565.15 115.16 560.11 101.72 560.11 83.6H592.15ZM694.843 134V33.2H711.943L726.883 95.48V134H694.843ZM756.763 79.28C749.203 79.28 743.263 79.82 738.943 80.9C734.743 81.98 731.683 83.72 729.763 86.12C727.843 88.4 726.883 91.52 726.883 95.48H726.703C723.223 74.6 723.763 58.7 728.323 47.78C732.883 36.86 742.363 31.4 756.763 31.4V79.28ZM876.198 108.8C876.198 117.92 871.578 124.88 862.338 129.68C853.218 134.48 838.998 136.88 819.678 136.88C800.598 136.88 786.378 133.82 777.018 127.7C767.658 121.46 762.978 111.56 762.978 98H795.018C795.018 100.88 797.058 103.28 801.138 105.2C805.218 107.12 811.398 108.08 819.678 108.08C828.198 108.08 834.378 107.06 838.218 105.02C842.178 102.98 844.158 100.04 844.158 96.2L876.198 108.8ZM764.058 58.4C764.058 53 766.038 48.2 769.998 44C773.958 39.68 780.078 36.32 788.358 33.92C796.758 31.52 807.198 30.32 819.678 30.32C838.278 30.32 852.138 33.44 861.258 39.68C870.498 45.8 875.118 55.64 875.118 69.2H843.078C843.078 67.4 842.238 65.72 840.558 64.16C838.878 62.6 836.238 61.4 832.638 60.56C829.158 59.6 824.838 59.12 819.678 59.12C811.758 59.12 805.818 60.08 801.858 62C798.018 63.92 796.098 66.62 796.098 70.1C796.098 73.7 797.598 76.46 800.598 78.38C803.598 80.3 807.318 81.62 811.758 82.34C816.318 83.06 822.498 83.72 830.298 84.32C840.138 85.16 848.118 86.18 854.238 87.38C860.358 88.58 865.518 90.86 869.718 94.22C874.038 97.58 876.198 102.44 876.198 108.8L844.158 96.2C844.158 92.6 842.718 89.96 839.838 88.28C837.078 86.6 833.478 85.52 829.038 85.04C824.718 84.44 818.958 84.08 811.758 83.96C801.558 83.72 793.278 83.12 786.918 82.16C780.678 81.2 775.278 78.92 770.718 75.32C766.278 71.6 764.058 65.96 764.058 58.4Z"
                  fill="white"
                />
              </svg>
            }
            @default {
              <svg
                width="288"
                height="132"
                viewBox="0 0 288 132"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M0.734766 66C0.734766 43.44 6.91477 26.82 19.2748 16.14C31.6348 5.46 48.9748 0.119996 71.2948 0.119996C84.8548 0.119996 96.6148 2.21999 106.575 6.41999C116.535 10.5 124.155 16.56 129.435 24.6C134.835 32.52 137.535 42.12 137.535 53.4H103.335C103.335 51.24 102.015 48.96 99.3748 46.56C96.7348 44.04 92.9548 42 88.0348 40.44C83.2348 38.76 77.6548 37.92 71.2948 37.92C59.8948 37.92 50.9548 40.32 44.4748 45.12C38.1148 49.8 34.9348 56.76 34.9348 66H0.734766ZM34.9348 66C34.9348 75.24 38.1148 82.26 44.4748 87.06C50.9548 91.74 59.8948 94.08 71.2948 94.08C77.7748 94.08 83.4148 93.24 88.2148 91.56C93.1348 89.76 96.8548 87.42 99.3748 84.54C102.015 81.54 103.335 78.36 103.335 75H122.595C120.315 88.2 117.135 98.94 113.055 107.22C109.095 115.38 103.575 121.56 96.4948 125.76C89.5348 129.84 80.4148 131.88 69.1348 131.88C47.0548 131.88 30.1348 126.6 18.3748 116.04C6.61477 105.36 0.734766 88.68 0.734766 66H34.9348ZM137.535 60.6V129H120.435L106.035 80.4H71.2948V60.6H137.535ZM146.106 66C146.106 43.44 152.286 26.82 164.646 16.14C177.006 5.46 194.346 0.119996 216.666 0.119996C238.986 0.119996 256.326 5.46 268.686 16.14C281.046 26.82 287.226 43.44 287.226 66H253.026C253.026 56.76 249.846 49.8 243.486 45.12C237.126 40.32 228.126 37.92 216.486 37.92C205.206 37.92 196.326 40.32 189.846 45.12C183.486 49.8 180.306 56.76 180.306 66H146.106ZM180.306 66C180.306 75.24 183.486 82.26 189.846 87.06C196.326 91.74 205.266 94.08 216.666 94.08C228.186 94.08 237.126 91.74 243.486 87.06C249.846 82.26 253.026 75.24 253.026 66H287.226C287.226 88.56 281.046 105.18 268.686 115.86C256.326 126.54 238.986 131.88 216.666 131.88C194.346 131.88 177.006 126.54 164.646 115.86C152.286 105.18 146.106 88.56 146.106 66H180.306Z"
                  fill="white"
                />
              </svg>
            }
          }
        </div>
      }
      @default {
        <button class="game-restart" (click)="startCountdown()">
          <svg
            width="1071"
            height="168"
            viewBox="0 0 1071 168"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M34.7027 134H0.502735V7.99999H34.7027V134ZM78.4427 7.99999L88.1627 42.2H15.0827V7.99999H78.4427ZM88.1627 63.8L78.4427 98H15.0827V63.8H88.1627ZM78.4427 7.99999C92.6027 7.99999 103.763 9.55999 111.923 12.68C120.203 15.68 126.143 20.42 129.743 26.9C133.343 33.38 135.143 42.08 135.143 53H100.943C100.943 45.8 96.6827 42.2 88.1627 42.2L78.4427 7.99999ZM88.1627 63.8C96.6827 63.8 100.943 60.2 100.943 53H135.143C135.143 63.92 133.343 72.62 129.743 79.1C126.143 85.58 120.203 90.38 111.923 93.5C103.763 96.5 92.6027 98 78.4427 98L88.1627 63.8ZM179.496 134H147.456V0.799998H179.496V134ZM314.282 33.2V134H297.182L282.242 83.6L297.182 33.2H314.282ZM190.262 83.6C190.262 65.6 194.102 52.22 201.782 43.46C209.462 34.7 221.282 30.32 237.242 30.32C253.082 30.32 264.542 34.64 271.622 43.28C278.822 51.92 282.422 65.36 282.422 83.6H282.242C282.242 77.36 279.902 72.62 275.222 69.38C270.542 66.14 262.862 64.52 252.182 64.52C241.502 64.52 233.822 66.14 229.142 69.38C224.582 72.62 222.302 77.36 222.302 83.6H190.262ZM222.302 83.6C222.302 89.72 224.582 94.46 229.142 97.82C233.822 101.06 241.502 102.68 252.182 102.68C262.862 102.68 270.542 101.06 275.222 97.82C279.902 94.46 282.242 89.72 282.242 83.6H282.422C282.422 101.84 278.822 115.28 271.622 123.92C264.542 132.56 253.082 136.88 237.242 136.88C221.282 136.88 209.462 132.5 201.782 123.74C194.102 114.98 190.262 101.6 190.262 83.6H222.302ZM398.706 123.2C393.426 132.92 388.446 140.66 383.766 146.42C379.086 152.3 373.146 156.8 365.946 159.92C358.866 163.16 349.806 164.72 338.766 164.6V135.44C346.086 135.44 352.146 134.42 356.946 132.38C361.866 130.34 365.106 127.28 366.666 123.2L320.226 33.2H357.666L381.246 81.8H385.386L408.966 33.2H445.326L398.706 123.2ZM584.001 7.99999L633.141 134H594.621L560.421 44H556.101L521.901 134H484.461L533.601 7.99999H584.001ZM592.461 76.4V112.4H515.061V76.4H592.461ZM727.32 78.2L742.26 33.2H759.36V117.8H727.32V78.2ZM667.38 78.2C667.38 81.08 668.22 83.54 669.9 85.58C671.58 87.5 674.58 89 678.9 90.08C683.34 91.16 689.46 91.7 697.26 91.7C705.18 91.7 711.3 91.16 715.62 90.08C720.06 89 723.12 87.5 724.8 85.58C726.48 83.54 727.32 81.08 727.32 78.2H727.5C727.5 93.92 723.84 105.86 716.52 114.02C709.32 122.06 697.92 126.08 682.32 126.08C666.6 126.08 654.84 122 647.04 113.84C639.24 105.68 635.34 93.8 635.34 78.2H667.38ZM635.34 78.2C635.34 62.6 639.24 50.72 647.04 42.56C654.84 34.4 666.6 30.32 682.32 30.32C697.92 30.32 709.32 34.4 716.52 42.56C723.84 50.6 727.5 62.48 727.5 78.2H727.32C727.32 75.32 726.48 72.92 724.8 71C723.12 68.96 720.06 67.4 715.62 66.32C711.3 65.24 705.18 64.7 697.26 64.7C689.46 64.7 683.34 65.24 678.9 66.32C674.58 67.4 671.58 68.96 669.9 71C668.22 72.92 667.38 75.32 667.38 78.2H635.34ZM759.36 117.8C759.36 129.32 757.2 138.68 752.88 145.88C748.68 153.2 742.08 158.6 733.08 162.08C724.2 165.68 712.62 167.48 698.34 167.48C678.18 167.48 663.18 164.3 653.34 157.94C643.5 151.58 638.58 142.1 638.58 129.5H670.62C670.62 131.18 671.58 132.86 673.5 134.54C675.42 136.22 678.48 137.6 682.68 138.68C686.88 139.88 692.16 140.48 698.52 140.48C708.84 140.48 716.22 138.32 720.66 134C725.1 129.8 727.32 124.4 727.32 117.8H759.36ZM894.184 33.2V134H877.084L862.144 83.6L877.084 33.2H894.184ZM770.164 83.6C770.164 65.6 774.004 52.22 781.684 43.46C789.364 34.7 801.184 30.32 817.144 30.32C832.984 30.32 844.444 34.64 851.524 43.28C858.724 51.92 862.324 65.36 862.324 83.6H862.144C862.144 77.36 859.804 72.62 855.124 69.38C850.444 66.14 842.764 64.52 832.084 64.52C821.404 64.52 813.724 66.14 809.044 69.38C804.484 72.62 802.204 77.36 802.204 83.6H770.164ZM802.204 83.6C802.204 89.72 804.484 94.46 809.044 97.82C813.724 101.06 821.404 102.68 832.084 102.68C842.764 102.68 850.444 101.06 855.124 97.82C859.804 94.46 862.144 89.72 862.144 83.6H862.324C862.324 101.84 858.724 115.28 851.524 123.92C844.444 132.56 832.984 136.88 817.144 136.88C801.184 136.88 789.364 132.5 781.684 123.74C774.004 114.98 770.164 101.6 770.164 83.6H802.204ZM940.629 134H908.589V33.2H940.629V134ZM940.629 26H908.589V0.799998H940.629V26ZM954.995 134V33.2H972.095L987.035 83.6V134H954.995ZM1038.33 83.6C1038.33 77.24 1036.35 72.5 1032.39 69.38C1028.43 66.14 1021.89 64.52 1012.77 64.52C1003.53 64.52 996.935 66.14 992.975 69.38C989.015 72.5 987.035 77.24 987.035 83.6H986.855C986.855 64.4 990.395 50.72 997.475 42.56C1004.67 34.4 1015.47 30.32 1029.87 30.32C1043.91 30.32 1054.17 33.5 1060.65 39.86C1067.13 46.1 1070.37 55.34 1070.37 67.58L1038.33 83.6ZM1070.37 134H1038.33V83.6L1070.37 67.58V134Z"
              fill="white"
            />
          </svg>
        </button>
      }
    }
  </div>
  <div class="player computer" [class.computer--has-result]="hasResult()">
    <header>
      <svg
        class="player-name"
        width="107"
        height="70"
        viewBox="0 0 107 70"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M55.9005 -4.76837e-06L83.2005 70H61.8005L42.8005 20H40.4005L21.4005 70H0.600488L27.9005 -4.76837e-06H55.9005ZM60.6005 38V58H17.6005V38H60.6005ZM106.79 70H87.7896V-4.76837e-06H106.79V70Z"
          fill="current"
        />
      </svg>
      <p class="player-result">{{ computerScore() }}</p>
    </header>
    @if (countdown() > 0) {
      @switch (countdown()) {
        @case (Countdown.PAPER) {
          <ng-container *ngTemplateOutlet="rock"></ng-container>
        }
        @case (Countdown.ROCK) {
          <ng-container *ngTemplateOutlet="paper"></ng-container>
        }
        @case (Countdown.SCISSORS) {
          <ng-container *ngTemplateOutlet="scissors"></ng-container>
        }
        @default {
          <ng-container *ngTemplateOutlet="horns"></ng-container>
        }
      }
    } @else {
      @switch (computerSign()) {
        @case (Signs.Rock) {
          <ng-container *ngTemplateOutlet="rock"></ng-container>
        }
        @case (Signs.Paper) {
          <ng-container *ngTemplateOutlet="paper"></ng-container>
        }
        @case (Signs.Scissors) {
          <ng-container *ngTemplateOutlet="scissors"></ng-container>
        }
        @default {
          <ng-container *ngTemplateOutlet="horns"></ng-container>
        }
      }
    }
  </div>
</div>

<div class="game-results">
  @if (hasResult()) {
    <div class="game-results-card game-results-card-human">
      <p>{{ playerSign()?.name }}</p>
      <p class="postfix">{{ playerGestureConfidence() }}% confidence</p>
    </div>
    <div class="game-results-card game-results-card-computer">
      <p>{{ computerSign() }}</p>
    </div>
  }
</div>

<ng-template #rock>
  <img src="assets/rock.webp" alt="Rock" />
</ng-template>

<ng-template #paper>
  <img src="assets/paper.webp" alt="Paper" />
</ng-template>

<ng-template #scissors>
  <img src="assets/scissors.webp" alt="Scissors" />
</ng-template>

<ng-template #horns>
  <img src="assets/horns.webp" alt="Horns" />
</ng-template>
